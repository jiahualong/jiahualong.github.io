<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Maven 3.8 maven-default-http-blocker 0.0.0.0 错误</title>
    <link href="/2021/06/11/Maven-maven-default-http-blocker-error/"/>
    <url>/2021/06/11/Maven-maven-default-http-blocker-error/</url>
    
    <content type="html"><![CDATA[<h2 id="现象"><a href="#现象" class="headerlink" title="现象"></a>现象</h2><p>运行mvn时提示</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">Downloading from maven-default-http-blocker: http://0.0.0.0/com/<br></code></pre></td></tr></table></figure><h2 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h2><p>Maven3.8.1<a href="https://maven.apache.org/docs/3.8.1/release-notes.html#cve-2021-26291">加强了安全性</a>，需要镜像库为https</p><h2 id="解决1"><a href="#解决1" class="headerlink" title="解决1"></a>解决1</h2><p>将nexus仓库配置https,并为镜像地址由http改为https</p><h2 id="解决2"><a href="#解决2" class="headerlink" title="解决2"></a>解决2</h2><p>在mirror配置中添加<code>mirrorOf</code> <code>blocked</code> ,如:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell">&lt;mirror&gt;<br>    &lt;id&gt;my-nexus&lt;/id&gt;<br>    &lt;name&gt;my-nexus&lt;/name&gt;<br>    &lt;url&gt;http://abc.com:123/repository/maven-public/&lt;/url&gt;<br>    &lt;mirrorOf&gt;external:http:*&lt;/mirrorOf&gt;<br>    &lt;blocked&gt;false&lt;/blocked&gt;<br>&lt;/mirror&gt;<br><br></code></pre></td></tr></table></figure><p>在<code>repository</code>中也添加 <blocked>false</blocked></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Gradle Cookie</title>
    <link href="/2021/05/26/Gradle-Cookie/"/>
    <url>/2021/05/26/Gradle-Cookie/</url>
    
    <content type="html"><![CDATA[<p>读音 Gradle [g’reɪdl]</p><h1 id="配置国内源"><a href="#配置国内源" class="headerlink" title="配置国内源"></a>配置国内源</h1><ul><li>配置用于jar下载的国内镜像 <code>build.gradle</code></li><li>配置gradle自我下载的国内镜像 <code>gradle/wrapper/gradle-wrapper.properties</code></li></ul><h2 id="build-gradle"><a href="#build-gradle" class="headerlink" title="build.gradle"></a>build.gradle</h2><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">repositories</span> &#123;<br>    mavenLocal()<br>    maven &#123; url <span class="hljs-string">&#x27;https://maven.aliyun.com/repository/public/&#x27;</span>&#125;<br>maven &#123; url <span class="hljs-string">&#x27;https://maven.aliyun.com/repository/spring&#x27;</span> &#125;<br>maven &#123; url <span class="hljs-string">&quot;https://repo.spring.io/release&quot;</span> &#125;<br>    maven &#123; url <span class="hljs-string">&quot;https://repo.spring.io/libs-release&quot;</span> &#125;<br>    maven &#123; url <span class="hljs-string">&quot;https://repo.spring.io/plugins-release/&quot;</span> &#125;<br>mavenCentral()<br>&#125;<br></code></pre></td></tr></table></figure><ul><li><a href="https://maven.aliyun.com/mvn/guide">link</a></li></ul><h2 id="gradle-wrapper-properties"><a href="#gradle-wrapper-properties" class="headerlink" title="gradle-wrapper.properties"></a>gradle-wrapper.properties</h2><p>编辑 <code>gradle/wrapper/gradle-wrapper.properties</code> 文件<br>将<code>distributionUrl</code>中的<code>services.gradle.org</code> 更换为 <code>downloads.gradle-dn.com</code></p><h1 id="init命令"><a href="#init命令" class="headerlink" title="init命令"></a>init命令</h1><p>通过 <code>init</code> 可创建 gradle 项目</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">gradle init --type java-application<br>gradle init --type java-library<br></code></pre></td></tr></table></figure><h1 id="小技巧"><a href="#小技巧" class="headerlink" title="小技巧"></a>小技巧</h1><p>将maven项目转成gradle项目</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">gradle init --type pom<br><br></code></pre></td></tr></table></figure><p>显示gradle中含有的projects</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">gradle projects<br></code></pre></td></tr></table></figure><p>显示gradle中含有的task</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">gradle tasks<br></code></pre></td></tr></table></figure><p>打印依赖树</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">gradle dependencies<br></code></pre></td></tr></table></figure><p>带参数执行gradle强制刷新~/.gradle下的文件缓存</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">gradle build --refresh-dependencies<br></code></pre></td></tr></table></figure><h1 id="Gradle中添加-LombOk-依赖"><a href="#Gradle中添加-LombOk-依赖" class="headerlink" title="Gradle中添加 LombOk 依赖"></a>Gradle中添加 LombOk 依赖</h1><p>编辑 <code>build.gradle</code> 文件, 添加依赖</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">compileOnly</span> &#x27;org.projectlombok:lombok:<span class="hljs-number">1</span>.<span class="hljs-number">18</span>.<span class="hljs-number">8</span>&#x27;<br><span class="hljs-attribute">annotationProcessor</span> &#x27;org.projectlombok:lombok:<span class="hljs-number">1</span>.<span class="hljs-number">18</span>.<span class="hljs-number">8</span>&#x27;<br></code></pre></td></tr></table></figure><p>IntelliJ IDEA &gt; Menu &gt; build &gt; Execute &gt; Deployment &gt; Compile &gt; Annotation Processors</p><h1 id="打包jar"><a href="#打包jar" class="headerlink" title="打包jar"></a>打包jar</h1><h2 id="找包一个jar-不带依赖jar"><a href="#找包一个jar-不带依赖jar" class="headerlink" title="找包一个jar 不带依赖jar"></a>找包一个jar 不带依赖jar</h2><p>需要 plugin java 即可,无需其它配置</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">gradle jar  <br></code></pre></td></tr></table></figure><h3 id="打包一个jar"><a href="#打包一个jar" class="headerlink" title="打包一个jar"></a>打包一个jar</h3><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs gradle">jar &#123;<br>    <span class="hljs-keyword">from</span> &#123;<br>        <span class="hljs-comment">//添加依懒到打包文件</span><br>        <span class="hljs-comment">//configurations.compile.collect &#123; it.isDirectory() ? it : zipTree(it) &#125;</span><br>        <span class="hljs-keyword">configurations</span>.<span class="hljs-keyword">runtime</span>.<span class="hljs-keyword">collect</span>&#123;zipTree(it)&#125;<br>    &#125;<br>    manifest &#123;<br>        attributes <span class="hljs-string">&#x27;Main-Class&#x27;</span>: <span class="hljs-string">&#x27;cc.stan.example.Application&#x27;</span><br>    &#125;<br>    baseName = <span class="hljs-string">&#x27;包的名字&#x27;</span><br>    version = <span class="hljs-string">&#x27;0.0.1-RELEASE&#x27;</span><br>&#125;<br></code></pre></td></tr></table></figure><p>执行命令 <code>gradle build</code> 或者 <code>./gradlew build</code> ，可在<code>build/libs</code> 查看生成的jar包</p><h3 id="打包成多个jar"><a href="#打包成多个jar" class="headerlink" title="打包成多个jar"></a>打包成多个jar</h3><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs gradle">jar &#123;<br>    manifest &#123;<br>        attributes <span class="hljs-string">&#x27;Main-Class&#x27;</span>: <span class="hljs-string">&#x27;cc.stan.example.Application&#x27;</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">task</span> clearJar(type: <span class="hljs-keyword">Delete</span>) &#123;<br>    <span class="hljs-keyword">delete</span> <span class="hljs-string">&#x27;build/libs/lib&#x27;</span><br>&#125;<br><br><span class="hljs-keyword">task</span> copyJar(type: <span class="hljs-keyword">Copy</span>) &#123;<br>    <span class="hljs-keyword">from</span> <span class="hljs-keyword">configurations</span>.<span class="hljs-keyword">runtime</span><br>    <span class="hljs-keyword">into</span>(<span class="hljs-string">&#x27;build/libs/lib&#x27;</span>)<br>&#125;<br><br><span class="hljs-keyword">task</span> release(type: <span class="hljs-keyword">Copy</span>, dependsOn: [build, clearJar, copyJar])<br></code></pre></td></tr></table></figure><p>执行命令 <code>gradle release</code> 或者<code>./gradlew relesse</code> ，可在 <code>build/libs</code> 查看生成的jar包</p>]]></content>
    
    
    <categories>
      
      <category>gradle</category>
      
    </categories>
    
    
    <tags>
      
      <tag>java</tag>
      
      <tag>gradle</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
